[Unit]
Description=RAUC Good-marking Service
ConditionKernelCommandLine=|bootchooser.active
ConditionKernelCommandLine=|rauc.slot
After=boot-complete.target
Requires=boot-complete.target

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStartPre=@BASE_BINDIR@/sh -c "@SBINDIR@/fw_rw_bootpart.sh unlock"
ExecStart=@BINDIR@/rauc status mark-good
ExecStartPost=@BASE_BINDIR@/sh -c "@SBINDIR@/fw_rw_bootpart.sh lock"

[Install]
WantedBy=multi-user.target
